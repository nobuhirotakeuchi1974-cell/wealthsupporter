<!-- Generated for file_path: profile_chat.html -->
<!-- Corresponding screen_name: 初期会話型プロフィール登録画面 -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>プロフィール登録 - Wealth Supporter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
  <style>
    /* チャット吹き出しの色調調整 */
    .chat-ai {
      background-color: #fff9e5;
    }
    .chat-user {
      background-color: #fff3cd;
    }
    /* スクロールバー調整 */
    #chat-log::-webkit-scrollbar {
      width: 8px;
    }
    #chat-log::-webkit-scrollbar-track {
      background: #fff9e5;
    }
    #chat-log::-webkit-scrollbar-thumb {
      background-color: #ffca28;
      border-radius: 4px;
    }
    /* 進捗バーの色調整 */
    progress[value] {
      /* Reset the default appearance */
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 1rem;
      border-radius: 9999px;
      background-color: #fde68a;
      overflow: hidden;
    }
    progress[value]::-webkit-progress-bar {
      background-color: #fde68a;
      border-radius: 9999px;
    }
    progress[value]::-webkit-progress-value {
      background-color: #ffc107;
      border-radius: 9999px;
      transition: width 0.3s ease-in-out;
    }
    progress[value]::-moz-progress-bar {
      background-color: #ffc107;
      border-radius: 9999px;
      transition: width 0.3s ease-in-out;
    }
  </style>
</head>
<body class="bg-yellow-50 font-sans text-gray-900 flex flex-col min-h-screen">
  <header class="bg-white shadow-sm py-4 px-6">
    <h1 class="text-yellow-600 text-2xl font-bold select-none">Wealth Supporter</h1>
  </header>

  <main role="main" class="flex flex-col flex-1 justify-center items-center px-4 py-6">
    <!-- 進捗バー -->
    <div class="w-full max-w-xl mb-6" aria-label="プロフィール入力進捗">
      <progress class="rounded-md shadow-inner" value="33" max="100">33%</progress>
      <p class="text-sm text-yellow-800 mt-1">入力完了度: 33%</p>
    </div>

    <!-- チャットウィンドウ -->
    <section aria-label="プロフィールチャット" class="bg-white rounded-xl shadow-lg w-full max-w-xl flex flex-col h-[600px] md:h-[700px]">
      <div id="chat-log" class="flex-1 overflow-y-auto p-4 space-y-4" role="log" aria-live="polite" aria-relevant="additions">
        <!-- AIメッセージ -->
        <div class="chat-ai rounded-lg p-3 max-w-[80%] text-gray-800 select-text shadow-sm" tabindex="0" aria-label="AIのメッセージ">
          <p>はじめまして！まずは年齢を教えてください。</p>
        </div>
        <!-- ユーザーメッセージ -->
        <div class="chat-user rounded-lg p-3 max-w-[80%] self-end text-gray-900 font-medium select-text shadow-inner" tabindex="0" aria-label="ユーザーのメッセージ">
          <p>30歳です。</p>
        </div>
        <!-- AIメッセージ -->
        <div class="chat-ai rounded-lg p-3 max-w-[80%] text-gray-800 select-text shadow-sm" tabindex="0" aria-label="AIのメッセージ">
          <p>ご収入はどのくらいですか？ざっくりで大丈夫です。</p>
        </div>
      </div>

      <form id="chat-input-form" class="flex border-t border-yellow-300" aria-label="メッセージ入力フォーム" autocomplete="off" novalidate>
        <label for="chat-input" class="sr-only">メッセージ入力</label>
        <input id="chat-input" type="text" name="chat-input" required
          class="flex-1 p-3 focus:outline-yellow-400 focus:ring-2 focus:ring-yellow-400 rounded-l-md border border-yellow-300 text-gray-900 placeholder-yellow-800"
          placeholder="メッセージを入力してください" aria-describedby="chat-helper" autocomplete="off" />
        <button type="submit" 
          class="bg-yellow-500 hover:bg-yellow-600 focus:ring-4 focus:ring-yellow-300 text-white px-5 font-bold rounded-r-md focus:outline-yellow-400 transition-colors duration-150"
          aria-label="メッセージを送信">
          <i class="fas fa-paper-plane"></i>
          <span class="sr-only">送信</span>
        </button>
      </form>
      <p id="chat-helper" class="sr-only">メッセージを入力して送信ボタンを押してください</p>
    </section>

  </main>

  <footer class="bg-white text-center py-4 text-sm text-gray-600 select-none">
    <p>Wealth Supporter © 2024</p>
  </footer>

  <script>
    // 簡易チャットUIの動作サンプル（フォーム送信時にチャットログに追加）
    (() => {
      'use strict';
      const form = document.getElementById('chat-input-form');
      const input = document.getElementById('chat-input');
      const chatLog = document.getElementById('chat-log');

      form.addEventListener('submit', e => {
        e.preventDefault();
        const text = input.value.trim();
        if(!text) return;

        // ユーザー発言追加
        const userMsgDiv = document.createElement('div');
        userMsgDiv.className = 'chat-user rounded-lg p-3 max-w-[80%] self-end text-gray-900 font-medium select-text shadow-inner';
        userMsgDiv.setAttribute('tabindex', '0');
        userMsgDiv.setAttribute('aria-label', 'ユーザーのメッセージ');
        const pUser = document.createElement('p');
        pUser.textContent = text;
        userMsgDiv.appendChild(pUser);
        chatLog.appendChild(userMsgDiv);

        // スクロールを最新位置へ移動
        chatLog.scrollTop = chatLog.scrollHeight;

        // 入力欄クリア
        input.value = '';
        input.focus();

        // デモ用：AIからの応答を遅延で追加
        setTimeout(() => {
          const aiRespDiv = document.createElement('div');
          aiRespDiv.className = 'chat-ai rounded-lg p-3 max-w-[80%] text-gray-800 select-text shadow-sm';
          aiRespDiv.setAttribute('tabindex', '0');
          aiRespDiv.setAttribute('aria-label', 'AIのメッセージ');
          const pAI = document.createElement('p');
          pAI.textContent = 'ありがとうございます。次の質問に進みますね。';
          aiRespDiv.appendChild(pAI);
          chatLog.appendChild(aiRespDiv);
          chatLog.scrollTop = chatLog.scrollHeight;
        }, 1000);
      });
    })();
  </script>
</body>
</html>