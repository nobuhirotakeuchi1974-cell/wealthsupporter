<!-- Generated for file_path: register.html -->
<!-- Corresponding screen_name: ユーザー登録画面 -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ユーザー登録 - Wealth Supporter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
  <style>
    /* カスタムスタイル: フォームエラー表示 */
    .input-error {
      border-color: #d32f2f;
    }
    .input-error:focus {
      outline-color: #d32f2f;
      box-shadow: 0 0 0 3px rgba(211, 47, 47, 0.3);
    }
    .toggle-checkbox:checked {
      background-color: #ffc107;
      border-color: #ffc107;
    }
    .toggle-checkbox:checked:focus {
      box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.5);
    }
    /* スクロールバー調整（簡易）*/
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #ffb300;
      border-radius: 4px;
    }
  </style>
</head>
<body class="bg-yellow-50 text-gray-900 font-sans min-h-screen flex flex-col">
  <header class="py-4 text-center bg-white shadow-sm">
    <h1 class="text-3xl font-bold text-yellow-600 select-none">Wealth Supporter</h1>
  </header>

  <main role="main" class="flex justify-center items-center flex-grow px-4 py-12">
    <section class="bg-white rounded-lg shadow-md p-8 max-w-md w-full" aria-labelledby="register-title" role="form">
      <h2 id="register-title" class="text-2xl font-semibold mb-6">ユーザー登録</h2>
      <form id="register-form" action="#" method="post" novalidate class="space-y-6" aria-describedby="register-desc">
        <p id="register-desc" class="text-sm text-gray-700 mb-4">
          メールアドレスとパスワードを入力し、<br />
          プライバシーポリシーと利用規約に同意のうえ登録してください。
        </p>

        <!-- メールアドレス入力 -->
        <div>
          <label for="email" class="block mb-1 font-medium text-gray-800">メールアドレス <span class="text-red-600">*</span></label>
          <input
            type="email"
            id="email"
            name="email"
            autocomplete="email"
            required
            placeholder="example@mail.com"
            class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-yellow-400 focus:ring-2 focus:ring-yellow-400 transition"
            aria-describedby="email-error"
            aria-invalid="false"
          />
          <p id="email-error" class="mt-1 text-sm text-red-600 sr-only" role="alert"></p>
        </div>

        <!-- パスワード入力 -->
        <div>
          <label for="password" class="block mb-1 font-medium text-gray-800">パスワード <span class="text-red-600">*</span></label>
          <input
            type="password"
            id="password"
            name="password"
            autocomplete="new-password"
            required
            placeholder="8文字以上のパスワード"
            minlength="8"
            class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-yellow-400 focus:ring-2 focus:ring-yellow-400 transition"
            aria-describedby="password-error"
            aria-invalid="false"
          />
          <p id="password-error" class="mt-1 text-sm text-red-600 sr-only" role="alert"></p>
        </div>

        <!-- パスワード確認入力 -->
        <div>
          <label for="password-confirm" class="block mb-1 font-medium text-gray-800">パスワード確認 <span class="text-red-600">*</span></label>
          <input
            type="password"
            id="password-confirm"
            name="password-confirm"
            autocomplete="new-password"
            required
            placeholder="パスワードと同じ文字を入力"
            minlength="8"
            class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-yellow-400 focus:ring-2 focus:ring-yellow-400 transition"
            aria-describedby="password-confirm-error"
            aria-invalid="false"
          />
          <p id="password-confirm-error" class="mt-1 text-sm text-red-600 sr-only" role="alert"></p>
        </div>

        <!-- 同意チェックボックス -->
        <div class="flex items-start space-x-3">
          <input
            id="terms-agree"
            name="terms-agree"
            type="checkbox"
            required
            class="toggle-checkbox mt-1 w-5 h-5 rounded border border-gray-400 focus:outline-yellow-400 focus:ring-2 focus:ring-yellow-400 transition"
            aria-describedby="terms-error"
            aria-invalid="false"
          />
          <label for="terms-agree" class="text-gray-800 leading-relaxed select-none">
            プライバシーポリシーおよび利用規約に同意します
            <span aria-hidden="true" class="text-red-600">*</span>
          </label>
        </div>
        <p id="terms-error" class="mt-1 text-sm text-red-600 sr-only" role="alert"></p>
        <p class="text-xs text-gray-600 mt-2 max-w-sm">
          <a href="./terms_privacy.html#privacy" class="text-orange-700 hover:underline focus:underline focus:outline-yellow-400" target="_blank" rel="noopener noreferrer">プライバシーポリシー</a>・
          <a href="./terms_privacy.html#terms" class="text-orange-700 hover:underline focus:underline focus:outline-yellow-400" target="_blank" rel="noopener noreferrer">利用規約</a>を必ずご確認ください。
        </p>

        <div>
          <button
            type="submit"
            class="w-full bg-yellow-500 hover:bg-yellow-600 focus:outline-yellow-400 focus:ring-2 focus:ring-yellow-400 text-white font-bold py-3 rounded-lg transition"
            aria-label="ユーザー登録を送信する"
          >
            登録
          </button>
        </div>
      </form>

      <p class="mt-6 text-center text-sm text-gray-700">
        すでにアカウントをお持ちですか？　
        <a href="./login.html" class="text-orange-700 font-semibold hover:underline focus:underline focus:outline-yellow-400">ログインはこちら</a>
      </p>
    </section>
  </main>

  <footer class="bg-white border-t border-gray-300 py-4 text-center text-sm text-gray-600">
    <nav aria-label="フッターナビゲーション" class="space-x-4">
      <a href="./terms_privacy.html#terms" class="text-orange-700 hover:underline focus:underline focus:outline-yellow-300">利用規約</a>
      <a href="./terms_privacy.html#privacy" class="text-orange-700 hover:underline focus:underline focus:outline-yellow-300">プライバシーポリシー</a>
      <a href="./help_faq.html" class="text-orange-700 hover:underline focus:underline focus:outline-yellow-300">ヘルプ・FAQ</a>
    </nav>
  </footer>

  <script>
    // フォームバリデーションとリアルタイムエラーメッセージ表示
    (function() {
      const form = document.getElementById('register-form');
      const email = form.elements['email'];
      const password = form.elements['password'];
      const passwordConfirm = form.elements['password-confirm'];
      const terms = form.elements['terms-agree'];

      const setError = (input, message) => {
        const errorEl = document.getElementById(input.id + '-error');
        input.classList.add('input-error');
        input.setAttribute('aria-invalid', 'true');
        errorEl.textContent = message;
        errorEl.classList.remove('sr-only');
      };

      const clearError = (input) => {
        const errorEl = document.getElementById(input.id + '-error');
        input.classList.remove('input-error');
        input.setAttribute('aria-invalid', 'false');
        errorEl.textContent = '';
        errorEl.classList.add('sr-only');
      };

      const validateEmail = () => {
        const val = email.value.trim();
        // 簡易メール形式チェック
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!val) {
          setError(email, 'メールアドレスを入力してください。');
          return false;
        }
        if (!emailRegex.test(val)) {
          setError(email, '正しいメールアドレスの形式で入力してください。');
          return false;
        }
        clearError(email);
        return true;
      };

      const validatePassword = () => {
        const val = password.value;
        if (!val) {
          setError(password, 'パスワードを入力してください。');
          return false;
        }
        if (val.length < 8) {
          setError(password, 'パスワードは8文字以上で入力してください。');
          return false;
        }
        clearError(password);
        return true;
      };

      const validatePasswordConfirm = () => {
        const val = passwordConfirm.value;
        if (!val) {
          setError(passwordConfirm, '確認用パスワードを入力してください。');
          return false;
        }
        if (val !== password.value) {
          setError(passwordConfirm, 'パスワードと一致しません。');
          return false;
        }
        clearError(passwordConfirm);
        return true;
      };

      const validateTerms = () => {
        if (!terms.checked) {
          const errorEl = document.getElementById('terms-error');
          errorEl.textContent = 'プライバシーポリシーと利用規約に同意してください。';
          errorEl.classList.remove('sr-only');
          terms.setAttribute('aria-invalid', 'true');
          return false;
        } else {
          const errorEl = document.getElementById('terms-error');
          errorEl.textContent = '';
          errorEl.classList.add('sr-only');
          terms.setAttribute('aria-invalid', 'false');
          return true;
        }
      };

      email.addEventListener('input', validateEmail);
      password.addEventListener('input', validatePassword);
      passwordConfirm.addEventListener('input', validatePasswordConfirm);
      terms.addEventListener('change', validateTerms);

      form.addEventListener('submit', (e) => {
        e.preventDefault();

        const isEmailValid = validateEmail();
        const isPasswordValid = validatePassword();
        const isPasswordConfirmValid = validatePasswordConfirm();
        const isTermsValid = validateTerms();

        if (isEmailValid && isPasswordValid && isPasswordConfirmValid && isTermsValid) {
          // ここで本来はフォーム送信処理
          alert('登録処理を実行します（ここはデモのためアラート表示のみ）。');
          form.reset();
          // 可能ならリダイレクトは以下を参考に実装
          // location.href = './profile_chat.html';
        } else {
          // フォーカスを最初のエラー要素に移す
          const firstError = form.querySelector('.input-error, [aria-invalid="true"]');
          if (firstError) {
            firstError.focus();
          }
        }
      });
    })();
  </script>
</body>
</html>